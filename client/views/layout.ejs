<!DOCTYPE html>
<html>
  <head>
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
    <!-- CSS only -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
      integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="/stylesheets/style.css" />
  </head>
  <body>
    <div class="container">
      <%- body %>
    </div>
    <script>
      document.querySelector("#emailForm").addEventListener("submit", (e) => {
        e.preventDefault();
        const email = document.querySelector("#InputEmail").value;
        const link = document.querySelector("#productLink").value;
        const price = document.querySelector("#price_input").value;
        const captcha = document.querySelector("#g-recaptcha-response").value;
        fetch("/", {
          method: "POST",
          headers: {
            "Content-type": "application/json",
          },
          body: JSON.stringify({
            email,
            link,
            price,
            captcha,
          }),
        })
          .then((res) => res.json())
          .then((data) => {
            console.log(data);
            alert(data.msg);
          });
      });
    </script>
  </body>
</html>
